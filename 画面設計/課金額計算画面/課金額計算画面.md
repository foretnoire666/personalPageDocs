# 課金額計算画面

## 概要

複数コンテンツのコンテンツ課金にかかる金額を算出する


## 全体仕様

- コンテンツ課金に関して下記を算出する
    - 月額
    - 特定期間の総計(未来日可)

### 設定可能なサービス

- [デフォルトで表示するサービス](#デフォルトで表示するサービス)とユーザが自由に設定可能なサービスについて月額・特定期間の総額の算出を可能とする
    - [デフォルトで表示するサービス](#デフォルトで表示するサービス)について以下を可能とする
        - コンテンツの追加
        - コンテンツの価格変更
        - サービス名の変更
        - コンテンツ名の変更
        - コンテンツの削除
        - 購入可能上限数の変更
    - ユーザが自由に設定可能なサービスについて以下を可能とする
        - サービスの追加
        - コンテンツの追加
        - コンテンツの価格変更
        - サービス名の変更
        - コンテンツ名の変更
        - コンテンツの削除
        - 購入可能上限数の変更
    - メンテナンスできなくなった後も可能な限りユーザライクとするため上記を実装する

#### 変更後の永続化に

- ユーザが自由に設定可能なサービスおよびユーザが[デフォルトで表示するサービス](#デフォルトで表示するサービス)に変更を加えた場合はIndexedDBに情報を保持する
    - [デフォルトで表示するサービス](#デフォルトで表示するサービス)に変更を加えた場合IndexedDBに対象サービスの内容をすべて保存する
        - 存在有無で判断が楽だしバグも出なさそうなので
    - [HTML5のLocal Storageを使ってはいけない（翻訳）](https://techracho.bpsinc.jp/hachi8833/2024_04_05/80851)
    - 余裕があったらjsonかyamlかtomlの入出力機能を作ってローカルにファイルを保存可能にする(追加開発時に考慮)

### 月額の期間指定

- 月額についてはラジオボタンで下記2パターンを可能とする
    - 当月1日から当月末日までの期間(デフォルト)
        - ラジオボタンの表示は`uuuu年m月d日～uuuu年m月d日`とする
    - 画面を開いた日から31日
        - ラジオボタンの表示は`uuuu年m月d日～uuuu年m月d日`とする

### 特定期間の総額

期間指定についてはラジオボタンで下記パターンを可能とする

- 画面を開いた日から365日(デフォルト)
    - ラジオボタンの表示は`uuuu年m月d日～uuuu年m月d日`とする
    - 閏日なら翌年の2/28まで
- 当月1日から1年
    - ラジオボタンの表示は`uuuu年m月d日～uuuu年m月d日`とする
    - 翌年の同月1日まで
- 指定日からn年mか月
    - 選択された際に整数値を受け付ける[numberのinput要素](https://developer.mozilla.org/ja/docs/Web/HTML/Reference/Elements/input/number)を表示するようにする
        - 年
            - min: `0`
            - max: `20`
        - 月
            - min: `0`または`1`
                - 年が`0`の場合`1`
            - max: `11`または`0`
                - 年が`20`の場合`0`
            - JavaScript制御
        - NOTE: スピナーは表示されてもいっか
- 指定日1から指定日2まで
    - 選択された際に[dateのinput要素](https://developer.mozilla.org/ja/docs/Web/HTML/Reference/Elements/input/date)を表示するようにする
        - 指定日1
            - min: `1990-01-01`
            - max: `2100-12-31`
        - 指定日2
            - min: 指定日1 + 1日
            - max: 指定日1 + 20年
            - JavaScript制御

### 入力方法

- ラジオボタン、input要素についてはキーボードのみで操作可能とする
    - スペースキーまたはエンターキー押下で選択、tabキーで移動
    - サービスの追加や金額の変更などは該当項目の任意のinput要素にフォーカスした状態でエンターキー押下でsubmitできるようにする

### コンテンツの選択

対象サービスのコンテンツについて下記指定を可能とする

- 購入間隔
    - 下記指定を可能とする
        - 排他
            - m日ごと
            - n月ごと
        - 排他
            - 特定月は購入しない
            - 特定月のみ購入する
        - m日ごと、ただし特定月のみ購入しないは可能とする
            - 購入しない月の翌月の購入日を指定できるようにする
                - 一律設定
                - 月ごと設定
- 購入数
    - 下記指定を可能とする
        - m回に1回変更
        - 特定月のみ変更
        - 0の指定を可能とする
            - 購入数の指定かつ日月指定の場合は0個購入扱いとする
                - NOTE: 購入間隔はそのまま

### デフォルトで表示するサービス

データを用意するのが面倒なので初期開発時は表示するコンテンツを絞る(月額などよく利用されそうなコンテンツから追加していく)  
Webショップ版があるサービスもあるけどYahoo!ショッピングとか楽天買い回りでギフトカード買ったほうが大体お得なのでとりあえずなしで

- `FLOWER KNIGHT GIRL`
- `千年戦争アイギス`
- `ステラソラ(GooglePlayStore版)`
- `ブルーアーカイブ -Blue Archive-(GooglePlayStore版)`

## ファイル名(省略可)

- TODO: 書く

## 初期表示

TODO: 書く

## 突起すべき点があるDOM要素について書く

### イベントリスナー

TODO: 書く

## 備考

TODO: なにかあれば
